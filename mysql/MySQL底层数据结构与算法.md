### 索引

索引是一种 **数据结构**。数据库索引是 DBMS 中一个 **排序的数据结构**，以 **协助快速查询、更新** 数据库表中数据。索引的实现通常使用 B 树以及变种 B+ 树。



#### 索引数据结构

- 二叉树
- 红黑树
- Hash表
- B-Tree

不使用二叉树存储索引：树的高度决定查找效率，不同的插入顺序会导致树的高度不一样，而树的高度直接影响了树的查找效率，不平衡的二叉查找树自然查找效率更低，严重时可能退化成链表。

不使用红黑树存储索引：红黑树虽然查找效率很高，但是一般情况下，数据库存储的数据量非常庞大，树的高度会特别高，且如果树的节点过多的话，平衡树的过程，在节点之间转移会花费较多的时间。如果要查找的数据正好在树的叶子节点，那查找会非常慢。

Hash 索引和 B+ 树索引有以下几点显见的区别：(来源：力扣(LeetCode)https://leetcode-cn.com/leetbook/read/database-handbook/pxd53i/)

- Hash 索引进行等值查询更快（一般情况下），但是却无法进行范围查询；
- Hash 索引不支持使用索引进行排序；
- Hash 索引不支持模糊查询以及多列索引的最左前缀匹配，原理也是因为 Hash 函数的不可预测；
- Hash 索引任何时候都避免不了回表查询数据，而 B+ 树在符合某些条件（聚簇索引，覆盖索引等）的时候可以只通过索引完成查询；
- Hash 索引虽然在等值查询上较快，但是不稳定，性能不可预测，当某个键值存在大量重复的时候，发生 Hash 碰撞，此时效率可能极差；而 B+ 树的查询效率比较稳定，对于所有的查询都是从根结点到叶子结点，且树的高度较低。



**B-Tree**

- 叶节点具有相同的深度，叶节点的指针为空
- 所有索引元素不重复
- 节点中的索引数据从左到右递增排列

**B+Tree(B-Tree变种)**

- 非叶子节点不存储data，只存储索引(冗余)，可以放更多的索引
- 叶子节点包含所有索引字段
