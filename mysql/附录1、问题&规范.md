#### 1、对阿里巴巴Java开发手册，超过3张表禁止join的理解

对超过3张表的join，会对索引以及SQL的优化带来困难，而且执行这样的复杂查询，会影响数据库的效率。一些对数据的关联计算等操作应该交给应用程序去完成，即便交给数据库去完成可能更快，也不应该这么做，因为数据库的职责是提供数据存储和查询，而不是做这些复杂的关联计算。



#### 2、MVCC&一致性非锁定读

一致性非锁定读指读取数据没时有加锁，MVCC与一致性非锁定读，能够提升数据库性能，并使得事务中每次读取相同的数据，数据都是一致的。由于MVCC与一致性非锁定读，使得即便有其他事务给数据加上了写锁，当前事务也无需等待写锁，而是直接读取快照。

每个读写事务，都有与之对应的回滚段，使得回滚事务时，能够回到数据更新前的状态。回滚段包含了3个系统隐藏字段: 事务ID、回滚指针、行ID。事务ID指最新对这条数据进行更新的事务ID；行ID指数据的唯一标识，如果有主键，这里的ID便是主键，否则就是某个唯一索引，如果都没有，系统会创建一个额外的唯一序列作行ID。

MVCC对聚簇索引是原地更新，对二级索引不是原地更新，先将原索引记录标记为删除，并新增索引记录。当使用二级索引进行检索时，从索引中找到聚簇索引，再根据聚簇索引找到正确版本的记录。需要注意的事，当覆盖索引被更新，此时覆盖索引会失效，根据检索出的聚簇索引回表检索正确版本的数据。



